# Memory - 2026-02-12

## Feature Milestones
- **Utility AI System:** Feature-complete. All 8 core desires (SURVIVE, GROW, PROVISION, FLEET, EXPAND, ASCEND, BUILD, COMMERCIAL) are integrated and operational.
- **Feudal Logistics (v4):** 100% complete. Implemented dynamic settlement roles (LUMBER, MINING, GRANARY), internal freight (hub-and-spoke), and the "THRIFTY" economic pacing state.
- **Priority Summing:** Implemented in `GOAPPlanner.ts`. The system now sums utility scores from multiple desires (e.g., Upgrade + Smithy) to create high-priority resource gathering jobs.
- **Sovereign AI:** Refactor complete. Factions now have independent, jittered check intervals and distinct internal states.

## Evolution Marathon Results
- **Batch 4:** Concluded at Gen 200. Successfully reached Tier 1 (Towns) but failed to hit Tier 2 (Cities). Weights saved to `config_results_batch4_feudal.json`.
- **Batch 5:** Observation of an "Extinction Event/Stagnation Trap." With 25,000 tick runs, the AI evolved extreme trade paranoia (`tradeRoiThreshold` > 400), leading to starvation and population collapse (Pop < 0.01).

## Decisions & Future Plans
- **Brainstorming:** Agreed to move toward **War & Diplomacy** next to deepen the "Mount & Blade" feel.
- **Next Steps:** Introduce a Faction Relationship Matrix (Diplomacy) and Military Infrastructure (Barracks/Armies) to break the "Miserly Village" stagnation.

## Technical Notes
- **Pathfinding:** Villagers and Caravans use the same shared Pathfinding system; "Stuck Detection" is now active for villagers.
- **Bidding:** `BlackboardDispatcher` uses `basePriority * saturationFactor * distanceFactor * fulfillmentFactor` for agent job selection.
